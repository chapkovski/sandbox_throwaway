{
    "containerDefinitions": [
        {
            "environment": [
                {
                    "name": "POSTGRES_USER",
                    "value": "${POSTGRES_USER}"
                },
                {
                    "name": "POSTGRES_PASSWORD",
                    "value": "${POSTGRES_PASSWORD}"
                },
                {
                    "name": "POSTGRES_DB",
                    "value": "${POSTGRES_DATABASE}"
                },
                {
                    "name": "POSTGRES_DATA",
                    "value": "/var/lib/postgresql/data/pgdata"
                }
            ],
            "essential": true,
            "image": "postgres:9.5",
            "memory": 128,
            "logConfiguration": {
                "options": {
                    "max-file": "3",
                    "max-size": "10m"
                }
            },
            "mountPoints": [
                {
                    "containerPath": "/var/lib/postgresql/data",
                    "sourceVolume": "Database"
                }
            ],
            "name": "database"
        },
        {
            "environment": [
                {
                    "name": "OTREE_PRODUCTION",
                    "value": "${OTREE_PRODUCTION}"
                },
                {
                    "name": "DATABASE_URL",
                    "value": "postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@database/${POSTGRES_DATABASE}"
                },
                {
                    "name": "OTREE_ADMIN_PASSWORD",
                    "value": "${OTREE_ADMIN_PASSWORD}"
                },
                {
                    "name": "OTREE_AUTH_LEVEL",
                    "value": "${OTREE_AUTH_LEVEL}"
                }
            ],
            "essential": true,
            "image": "otree:latest",
             "memory": 128,
            "logConfiguration": {
                "options": {
                    "max-file": "3",
                    "max-size": "10m"
                }
            },
            "mountPoints": [
                {
                    "containerPath": "/opt/init",
                    "sourceVolume": "Otree-Resetdb"
                }
            ],
            "name": "otree",
            "portMappings": [
                {
                    "containerPort": 80,
                    "hostPort": 8000
                }
            ]
        },
        {
            "command": [
                "redis-server"
            ],
            "essential": true,
            "image": "redis",
             "memory": 128,
            "logConfiguration": {
                "options": {
                    "max-file": "3",
                    "max-size": "10m"
                }
            },
            "name": "redis"
        }
    ],
    "family": "",
    "volumes": [
        {
            "host": {
                "sourcePath": "database"
            },
            "name": "Database"
        },
        {
            "host": {
                "sourcePath": "otree-resetdb"
            },
            "name": "Otree-Resetdb"
        }
    ]
}
